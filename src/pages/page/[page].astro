---
export const prerender = false;

import BaseLayout from "@/layouts/base.astro";
import LatestNews from "@/pages/_home/latestNews.astro";
import { siteConfig } from "@/lib/siteConfig";

const { page } = Astro.params;
const pageNumber = Number(page);

if (!pageNumber || pageNumber < 2) {
  return Astro.redirect("/");
}

const limit = 9;

/* ---------- SAME DOMAIN LOGIC AS HOME ---------- */
const url = Astro.request ? new URL(Astro.request.url) : null;
let site = url?.hostname || "";
site = site.replace(/^www\./, "");

if (!site || site.includes("localhost") || site.includes("astro.local")) {
  site = "germanyfinanz.news";
}

const siteData = siteConfig[site] || { title: "News" };

const entry = {
  data: {
    title: `${siteData.title} â€“ Page ${pageNumber}`,
    description: `Latest news from ${siteData.title}, page ${pageNumber}`,
  },
};
---

<BaseLayout entry={entry}>
  <LatestNews site={site} page={pageNumber} limit={limit} />
</BaseLayout>
