---
export const prerender = false;

import BaseLayout from "@/layouts/base.astro";
import LatestNews from "@/pages/_home/latestNews.astro";
import { siteConfig } from "@/lib/siteConfig";

/* ---------- DOMAIN ---------- */
const url = Astro.request ? new URL(Astro.request.url) : null;
const rawHost = url?.hostname || "";
const hostname = rawHost.replace(/^www\./, "");
const site = siteConfig[rawHost] || siteConfig[hostname] || { title: "News" };

/* ---------- PAGINATION ---------- */
const page = Number(url?.searchParams.get("page") || 1);
const limit = 9;

/* ---------- SEO ---------- */
const entry = {
  data: {
    title:
      page > 1
        ? `${site.title} – Latest News (Page ${page})`
        : `${site.title} – Latest News`,
    description: `Latest news from ${site.title}`,
  },
};
---

<BaseLayout entry={entry}>
  <LatestNews page={page} limit={limit} />
</BaseLayout>
